{% extends "admin/change_list.html" %}
{% load i18n %}
{% block search %}
{% load custom_tags %}

    {{ block.super }}

    <div class="">
        Total Subscribers = {{ total_subscribers }}
    </div>
    <span class="">
        <div id="myPlotTotalSubscribers" style="width:50%;max-width:300px; display: inline-block;
   margin-left: 10px;"></div>

        <div id="myPlotByCountry" style="width:50%;max-width:300px;  display: inline-block;
   margin-left: 10px;"></div>

        <div id="myPlotByUsage" style="width:50%;max-width:300px;  display: inline-block;
   margin-left: 10px;"></div>
    </span>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{#    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">#}

    <script>
    {#  TOTAL SUBSCRIBERS PER MONTH  #}
        var xArray = {{ by_usage | js }};
        {#var yArray = {{ total_subscribers | js }};#}
        // Define Data
        var data = [{
          x: xArray,
          {#y: yArray,#}
          type:"histogram"
        }];
        // Define Layout
        var layout = {
          title: "Subscribers by Usage"
        };
        Plotly.newPlot("myPlotByUsage", data, layout);
    </script>

    <script>
    {#  TOTAL SUBSCRIBERS PER MONTH  #}
        var xArray = {{ by_country | js }};
        {#var yArray = {{ total_subscribers | js }};#}
        // Define Data
        var data = [{
          x: xArray,
          {#y: yArray,#}
          type:"histogram"
        }];
        // Define Layout
        var layout = {
          title: "Subscribers by Country"
        };
        Plotly.newPlot("myPlotByCountry", data, layout);
    </script>

    <script>
    {#  TOTAL SUBSCRIBERS PER MONTH  #}
        var xArray = {{ month_year | js }};
        {#var yArray = {{ total_subscribers | js }};#}
        // Define Data
        var data = [{
          x: xArray,
          {#y: yArray,#}
          type:"histogram"
        }];
        // Define Layout
        var layout = {
          title: "Subscribers per Month"
        };
        Plotly.newPlot("myPlotTotalSubscribers", data, layout);
    </script>
{% endblock %}

